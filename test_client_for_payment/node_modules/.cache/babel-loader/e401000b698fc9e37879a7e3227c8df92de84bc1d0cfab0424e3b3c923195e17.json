{"ast":null,"code":"var _jsxFileName = \"/home/sudip/Documents/Weby/js_backend/esewa_integration/client/src/components/PaymentForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport CryptoJS from 'crypto-js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PaymentForm = () => {\n  _s();\n  const [transactionUuid, setTransactionUuid] = useState('unique-transaction-id');\n  const [error, setError] = useState('');\n  const generateSignature = (totalAmount, transactionUuid, productCode) => {\n    const secretKey = '8gBm/:&EnhH.1/q('; // Use the provided secret key for UAT\n    const message = `total_amount=${totalAmount},transaction_uuid=${transactionUuid},product_code=${productCode}`;\n    const hash = CryptoJS.HmacSHA256(message, secretKey);\n    return CryptoJS.enc.Base64.stringify(hash);\n  };\n  const handleSubmit = event => {\n    try {\n      const totalAmount = 110; // Replace with actual total amount\n      const productCode = 'EPAYTEST';\n      const signature = generateSignature(totalAmount, transactionUuid, productCode);\n      document.getElementById('signature').value = signature;\n    } catch (error) {\n      console.error('Error in handleSubmit:', error);\n      setError('An error occurred while generating the signature.');\n      event.preventDefault();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [error && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'red'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      action: \"https://rc-epay.esewa.com.np/api/epay/main/v2/form\",\n      method: \"POST\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"amount\",\n        name: \"amount\",\n        value: \"100\",\n        required: true,\n        readOnly: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"tax_amount\",\n        name: \"tax_amount\",\n        value: \"10\",\n        required: true,\n        readOnly: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"total_amount\",\n        name: \"total_amount\",\n        value: \"110\",\n        required: true,\n        readOnly: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"transaction_uuid\",\n        name: \"transaction_uuid\",\n        value: transactionUuid,\n        required: true,\n        readOnly: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"product_code\",\n        name: \"product_code\",\n        value: \"EPAYTEST\",\n        required: true,\n        readOnly: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"product_service_charge\",\n        name: \"product_service_charge\",\n        value: \"0\",\n        required: true,\n        readOnly: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"product_delivery_charge\",\n        name: \"product_delivery_charge\",\n        value: \"0\",\n        required: true,\n        readOnly: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"success_url\",\n        name: \"success_url\",\n        value: \"http://localhost:3000/success\",\n        required: true,\n        readOnly: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"failure_url\",\n        name: \"failure_url\",\n        value: \"http://localhost:3000/failure\",\n        required: true,\n        readOnly: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"signed_field_names\",\n        name: \"signed_field_names\",\n        value: \"total_amount,transaction_uuid,product_code\",\n        required: true,\n        readOnly: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"hidden\",\n        id: \"signature\",\n        name: \"signature\",\n        value: \"\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 9\n  }, this);\n};\n_s(PaymentForm, \"VG7Mge57Pp8GbLnGKOucq1lyrn4=\");\n_c = PaymentForm;\nexport default PaymentForm;\nvar _c;\n$RefreshReg$(_c, \"PaymentForm\");","map":{"version":3,"names":["React","useState","CryptoJS","jsxDEV","_jsxDEV","PaymentForm","_s","transactionUuid","setTransactionUuid","error","setError","generateSignature","totalAmount","productCode","secretKey","message","hash","HmacSHA256","enc","Base64","stringify","handleSubmit","event","signature","document","getElementById","value","console","preventDefault","children","style","color","fileName","_jsxFileName","lineNumber","columnNumber","action","method","onSubmit","type","id","name","required","readOnly","_c","$RefreshReg$"],"sources":["/home/sudip/Documents/Weby/js_backend/esewa_integration/client/src/components/PaymentForm.js"],"sourcesContent":["import React, { useState } from 'react';\nimport CryptoJS from 'crypto-js';\n\nconst PaymentForm = () => {\n    const [transactionUuid, setTransactionUuid] = useState('unique-transaction-id');\n    const [error, setError] = useState('');\n\n    const generateSignature = (totalAmount, transactionUuid, productCode) => {\n        const secretKey = '8gBm/:&EnhH.1/q('; // Use the provided secret key for UAT\n        const message = `total_amount=${totalAmount},transaction_uuid=${transactionUuid},product_code=${productCode}`;\n        const hash = CryptoJS.HmacSHA256(message, secretKey);\n        return CryptoJS.enc.Base64.stringify(hash);\n    }\n\n    const handleSubmit = (event) => {\n        try {\n            const totalAmount = 110; // Replace with actual total amount\n            const productCode = 'EPAYTEST';\n            const signature = generateSignature(totalAmount, transactionUuid, productCode);\n            document.getElementById('signature').value = signature;\n        } catch (error) {\n            console.error('Error in handleSubmit:', error);\n            setError('An error occurred while generating the signature.');\n            event.preventDefault();\n        }\n    }\n\n    return (\n        <div>\n            {error && <p style={{ color: 'red' }}>{error}</p>}\n            <form action=\"https://rc-epay.esewa.com.np/api/epay/main/v2/form\" method=\"POST\" onSubmit={handleSubmit}>\n                <input type=\"text\" id=\"amount\" name=\"amount\" value=\"100\" required readOnly />\n                <input type=\"text\" id=\"tax_amount\" name=\"tax_amount\" value=\"10\" required readOnly />\n                <input type=\"text\" id=\"total_amount\" name=\"total_amount\" value=\"110\" required readOnly />\n                <input type=\"text\" id=\"transaction_uuid\" name=\"transaction_uuid\" value={transactionUuid} required readOnly />\n                <input type=\"text\" id=\"product_code\" name=\"product_code\" value=\"EPAYTEST\" required readOnly />\n                <input type=\"text\" id=\"product_service_charge\" name=\"product_service_charge\" value=\"0\" required readOnly />\n                <input type=\"text\" id=\"product_delivery_charge\" name=\"product_delivery_charge\" value=\"0\" required readOnly />\n                <input type=\"text\" id=\"success_url\" name=\"success_url\" value=\"http://localhost:3000/success\" required readOnly />\n                <input type=\"text\" id=\"failure_url\" name=\"failure_url\" value=\"http://localhost:3000/failure\" required readOnly />\n                <input type=\"text\" id=\"signed_field_names\" name=\"signed_field_names\" value=\"total_amount,transaction_uuid,product_code\" required readOnly />\n                <input type=\"hidden\" id=\"signature\" name=\"signature\" value=\"\" required />\n                <input type=\"submit\" value=\"Submit\" />\n            </form>\n        </div>\n    );\n}\n\nexport default PaymentForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}